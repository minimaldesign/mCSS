---
import discordIcon from '../assets/icons/social-discord.svg?raw';
import facebookIcon from '../assets/icons/social-facebook.svg?raw';
import githubIcon from '../assets/icons/social-github.svg?raw';
import instagramIcon from '../assets/icons/social-instagram.svg?raw';
import linkedinIcon from '../assets/icons/social-linkedin.svg?raw';
import mindsIcon from '../assets/icons/social-minds.svg?raw';
import odyseeIcon from '../assets/icons/social-odysee.svg?raw';
import pinterestIcon from '../assets/icons/social-pinterest.svg?raw';
import redditIcon from '../assets/icons/social-reddit.svg?raw';
import snapchatIcon from '../assets/icons/social-snapchat.svg?raw';
import substackIcon from '../assets/icons/social-substack.svg?raw';
import telegramIcon from '../assets/icons/social-telegram.svg?raw';
import tiktokIcon from '../assets/icons/social-tiktok.svg?raw';
import twitchIcon from '../assets/icons/social-twitch.svg?raw';
import xIcon from '../assets/icons/social-x.svg?raw';
import youtubeIcon from '../assets/icons/social-youtube.svg?raw';
import bitchuteIcon from '../assets/icons/social-bitchute.svg?raw';
import bastyonIcon from '../assets/icons/social-bastyon.svg?raw';
import linkIcon from '../assets/icons/link.svg?raw';

const platforms = [
  { name: 'Bastyon', icon: bastyonIcon, match: /bastyon\.com/ },
  { name: 'Bitchute', icon: bitchuteIcon, match: /bitchute\.com/ },
  { name: 'Discord', icon: discordIcon, match: /discord\.com/ },
  { name: 'Facebook', icon: facebookIcon, match: /facebook\.com/ },
  { name: 'Github', icon: githubIcon, match: /github\.com/ },
  { name: 'Instagram', icon: instagramIcon, match: /instagram\.com/ },
  { name: 'Linkedin', icon: linkedinIcon, match: /linkedin\.com/ },
  { name: 'Minds', icon: mindsIcon, match: /minds\.com/ },
  { name: 'Odysee', icon: odyseeIcon, match: /odysee\.com/ },
  { name: 'Pinterest', icon: pinterestIcon, match: /pinterest\.com/ },
  { name: 'Reddit', icon: redditIcon, match: /reddit\.com/ },
  { name: 'Snapchat', icon: snapchatIcon, match: /snapchat\.com/ },
  { name: 'Substack', icon: substackIcon, match: /substack\.com/ },
  { name: 'Telegram', icon: telegramIcon, match: /telegram\.org|t\.me/ },
  { name: 'Tiktok', icon: tiktokIcon, match: /tiktok\.com/ },
  { name: 'Twitch', icon: twitchIcon, match: /twitch\.tv/ },
  { name: 'X', icon: xIcon, match: /twitter\.com|x\.com/ },
  { name: 'YouTube', icon: youtubeIcon, match: /youtube\.com/ },
  // Catch-all must be last
  { name: 'Social Media', icon: linkIcon, match: /.*/ },
];

const { urls = [], size = '', extraClass = '' } = Astro.props;

const filteredPlatforms = urls.map((url) => {
  const platform = platforms.find((p) => p.match.test(url));
  return {
    url,
    icon: platform.icon,
    key: platform.name,
  };
});
---

<!-- prettier-ignore -->
<ul
  class:list={[
    'socialMedia',
    size && `socialMedia-${size}`,
    extraClass,
  ]}
>
  {
    filteredPlatforms.map(({ url, icon, key }) => (
      <li>
        <a href={url} title={key} target="_blank" rel="noopener noreferrer" aria-label={key}>
          <Fragment set:html={icon} aria-hidden="true" />
          <span class="a11y-srOnly">{key}</span>
        </a>
      </li>
    ))
  }
</ul>
